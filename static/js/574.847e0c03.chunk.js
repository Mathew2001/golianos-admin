"use strict";(self.webpackChunkrojeh_glianos=self.webpackChunkrojeh_glianos||[]).push([[574],{452(e,s,n){n.d(s,{A:()=>c});var t=n(43),a=n(858),i=n(819);const l={addImage:e=>i.A.post("/image/add",e)};var r=n(579);const o=function(e){let{file:s,image:n,onChange:a,uploaded:i,register:l,name:o,ImageTitle:c}=e;const[d,m]=(0,t.useState)(!1),[u,g]=(0,t.useState)(""),b=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),p=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m(!0)},[]),h=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m(!1)},[]),x=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m(!1);const s=e.dataTransfer.files;if(s&&s.length>0){const e=s[0];if(!["image/jpeg","image/png","image/gif"].includes(e.type))return void g("\u05e1\u05d5\u05d2 \u05d4\u05e7\u05d5\u05d1\u05e5 \u05d0\u05d9\u05e0\u05d5 \u05e0\u05ea\u05de\u05da. \u05d0\u05e0\u05d0 \u05d4\u05e2\u05dc\u05d4 \u05e7\u05d5\u05d1\u05e5 \u05de\u05e1\u05d5\u05d2 PNG, JPG, \u05d0\u05d5 GIF \u05d1\u05dc\u05d1\u05d3.");if(e.size>10485760)return void g("\u05d4\u05e7\u05d5\u05d1\u05e5 \u05d2\u05d3\u05d5\u05dc \u05de\u05d3\u05d9. \u05d4\u05d2\u05d5\u05d3\u05dc \u05d4\u05de\u05e7\u05e1\u05d9\u05de\u05dc\u05d9 \u05d4\u05d5\u05d0 10MB.");a({target:{files:[e]}})}},[a]);return(0,r.jsx)("div",{className:"container px-0",dir:"rtl",children:(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label fw-bold",children:c}),(0,r.jsxs)("div",{className:"row g-2",children:[(0,r.jsx)("div",{className:"col-lg-4 col-md-6 col-12",children:(0,r.jsx)("div",{onDragEnter:p,onDragLeave:h,onDragOver:b,onDrop:x,className:"p-4 bg-light border rounded-3 text-center position-relative ".concat(d?"border-success border-3 bg-success bg-opacity-10":"border-secondary border-2"),style:{borderStyle:"dashed",transition:"background 0.2s, border 0.2s"},children:(0,r.jsxs)("div",{className:"mb-2 d-flex flex-column align-items-center justify-content-center",children:[(0,r.jsx)("div",{className:"mb-2",style:{width:44,height:44,background:"#e9ecef",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:28,color:"#868e96"},children:(0,r.jsx)("i",{className:"bi bi-image"})}),(0,r.jsx)("div",{className:"fw-normal text-secondary small",children:"\u05d2\u05e8\u05d5\u05e8 \u05d5\u05e9\u05d7\u05e8\u05e8 \u05d0\u05ea \u05d4\u05ea\u05de\u05d5\u05e0\u05d4 \u05db\u05d0\u05df, \u05d0\u05d5"}),(0,r.jsxs)("label",{className:"btn btn-success mt-2 mb-0",children:["\u05d1\u05d7\u05e8 \u05e7\u05d5\u05d1\u05e5",(0,r.jsx)("input",{type:"file",id:"fileInput",name:o,onChange:e=>{const s=e.target.files[0];if(console.log("file:",s),s){if(!["image/jpeg","image/png","image/gif"].includes(s.type))return void g("\u05e1\u05d5\u05d2 \u05d4\u05e7\u05d5\u05d1\u05e5 \u05d0\u05d9\u05e0\u05d5 \u05e0\u05ea\u05de\u05da. \u05d0\u05e0\u05d0 \u05d4\u05e2\u05dc\u05d4 \u05e7\u05d5\u05d1\u05e5 \u05de\u05e1\u05d5\u05d2 PNG, JPG, \u05d0\u05d5 GIF \u05d1\u05dc\u05d1\u05d3.");if(s.size>10485760)return void g("\u05d4\u05e7\u05d5\u05d1\u05e5 \u05d2\u05d3\u05d5\u05dc \u05de\u05d3\u05d9. \u05d4\u05d2\u05d5\u05d3\u05dc \u05d4\u05de\u05e7\u05e1\u05d9\u05de\u05dc\u05d9 \u05d4\u05d5\u05d0 10MB.");g(""),a(e)}},accept:"image/png,image/jpeg,image/gif",className:"d-none"})]}),(0,r.jsx)("div",{className:"form-text mt-2",children:"PNG, JPG, GIF \u05e2\u05d3 10MB"})]})})}),(0,r.jsx)("div",{className:"col-lg-4 col-md-6 col-12",children:u?(0,r.jsx)("div",{className:"h-100 d-flex align-items-center justify-content-center border border-danger rounded-3 bg-danger bg-opacity-10 p-2",children:(0,r.jsx)("p",{className:"text-danger text-center m-0 small",children:u})}):s?(0,r.jsx)("div",{className:"h-100 d-flex flex-column align-items-center justify-content-center border rounded-3 bg-white",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{src:n,alt:"\u05ea\u05e6\u05d5\u05d2\u05d4 \u05de\u05e7\u05d3\u05d9\u05de\u05d4",style:{maxHeight:"9rem",width:"100%",objectFit:"contain",padding:6},className:"mb-2"}),(0,r.jsx)("p",{className:"small mb-0 text-secondary",children:"\u05ea\u05de\u05d5\u05e0\u05d4 \u05d7\u05d3\u05e9\u05d4"})]}):(0,r.jsx)("p",{className:"text-secondary small mb-0",children:"\u05de\u05e2\u05dc\u05d4 \u05ea\u05de\u05d5\u05e0\u05d4..."})}):n?(0,r.jsxs)("div",{className:"h-100 d-flex flex-column align-items-center justify-content-center border rounded-3 bg-white",children:[(0,r.jsx)("img",{src:n,alt:"\u05ea\u05de\u05d5\u05e0\u05d4 \u05e7\u05d9\u05d9\u05de\u05ea",style:{maxHeight:"9rem",width:"100%",objectFit:"contain",padding:6},className:"mb-2"}),(0,r.jsx)("p",{className:"small mb-0 text-secondary",children:"\u05ea\u05de\u05d5\u05e0\u05d4 \u05e7\u05d9\u05d9\u05de\u05ea"})]}):(0,r.jsx)("div",{className:"h-100 d-flex align-items-center justify-content-center border rounded-3 bg-light",children:(0,r.jsx)("p",{className:"mb-0 text-secondary ",children:"\u05d0\u05d9\u05df \u05ea\u05de\u05d5\u05e0\u05d4"})})})]})]})})},c=e=>{let{name:s,control:n,ImageTitle:i="\u05ea\u05de\u05d5\u05e0\u05d4"}=e;const[c,d]=(0,t.useState)(null),[m,u]=(0,t.useState)(!1),g=async(e,s)=>{const n=new FileReader;n.readAsDataURL(e),n.onloadend=async()=>{const e=n.result,t=await b(e);s.onChange(t)}},b=async e=>{const s=new FormData;s.append("image",e),u(!0);try{return await l.addImage(s)}finally{u(!1)}};return(0,r.jsx)(a.xI,{name:s,control:n,defaultValue:null,render:e=>{var n;let{field:t}=e;return(0,r.jsx)(o,{name:s,ImageTitle:i,file:c,image:(null===(n=t.value)||void 0===n?void 0:n.image)||null,uploaded:!m,onChange:e=>(async(e,s)=>{var n;const t=null===(n=e.target.files)||void 0===n?void 0:n[0];t&&(d(t),g(t,s))})(e,t)})}})}},574(e,s,n){n.r(s),n.d(s,{default:()=>b});var t=n(3),a=n(858),i=n(800),l=n(685);n(295);const r=e=>{const s=(0,t.wA)(),{register:n,handleSubmit:r,formState:{errors:o},reset:c,control:d}=(0,a.mN)(),m=(0,l.Zp)();return{onSubmit:async n=>{let{businessName:t,businessAddress:a,businessPhone:l,businessEmail:r,businessLogo:o,userId:c}=n;e&&(await s((0,i.AK)(e,{businessName:t,businessAddress:a,businessPhone:l,businessEmail:r,businessLogo:o,userId:c})),m("/dashboard"))},register:n,handleSubmit:r,errors:o,reset:c,control:d}};var o=n(420),c=n(292),d=n(965),m=n(43),u=n(452),g=n(579);const b=()=>{const{id:e}=(0,l.g)(),s=(0,t.wA)(),{onSubmit:n,register:a,handleSubmit:b,errors:p,reset:h,control:x}=r(e),{business:f,loading:j}=(0,t.d4)(e=>e.businessReducer);return(0,m.useEffect)(()=>{s((0,i.JU)(e))},[s,e]),(0,m.useEffect)(()=>{f&&h({businessName:f.businessName,businessAddress:f.businessAddress,businessPhone:f.businessPhone,businessEmail:f.businessEmail,businessLogo:f.businessLogo})},[f]),!f||j?(0,g.jsx)("div",{children:"Loading..."}):(0,g.jsx)("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:(0,g.jsx)("div",{className:"col-md-6 col-12",children:(0,g.jsx)(o.A,{subForms:[{title:"\u05e4\u05e8\u05d8\u05d9 \u05d4\u05e2\u05e1\u05e7",gridCols:1,children:[{component:d.A,props:{register:a,name:"businessName",label:"\u05e9\u05dd \u05d4\u05e2\u05e1\u05e7",type:"text",placeholder:"\u05e9\u05dd \u05d4\u05e2\u05e1\u05e7"}},{component:d.A,props:{register:a,name:"businessAddress",label:"\u05db\u05ea\u05d5\u05d1\u05ea",type:"text",placeholder:"\u05db\u05ea\u05d5\u05d1\u05ea"}},{component:d.A,props:{register:a,name:"businessPhone",label:"\u05d8\u05dc\u05e4\u05d5\u05df",type:"text",placeholder:"\u05d8\u05dc\u05e4\u05d5\u05df"}},{component:d.A,props:{register:a,name:"businessEmail",label:"\u05d3\u05d5\u05d0\u05e8 \u05d0\u05dc\u05e7\u05d8\u05e8\u05d5\u05e0\u05d9",type:"email",placeholder:"\u05d3\u05d5\u05d0\u05e8 \u05d0\u05dc\u05e7\u05d8\u05e8\u05d5\u05e0\u05d9"}},{component:u.A,props:{control:x,name:"businessLogo",ImageTitle:"\u05dc\u05d5\u05d2\u05d5"}}]}],renderSubForms:(e,s)=>(0,g.jsx)(c.A,{title:e.title,children:e.children,gridCols:e.gridCols},s),handleSubmit:b,onSubmit:n,buttonText:"\u05e2\u05e8\u05d9\u05db\u05ea \u05e4\u05e8\u05d8\u05d9 \u05d4\u05e2\u05e1\u05e7",buttonClass:"btn-gray-light col-12"})})})}}}]);
//# sourceMappingURL=574.847e0c03.chunk.js.map