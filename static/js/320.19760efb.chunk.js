"use strict";(self.webpackChunkrojeh_glianos=self.webpackChunkrojeh_glianos||[]).push([[320],{320(e,s,a){a.r(s),a.d(s,{default:()=>j});var t=a(43),n=a(3),r=a(858),l=a(936),i=a(685),c=a(295);const o=(e,s)=>{const a=(0,n.wA)(),t=(0,i.Zp)(),{register:o,handleSubmit:d,formState:{errors:m},reset:g,control:u}=(0,r.mN)();return{onSubmit:n=>{let{slug:r,sections:i,pageName:o}=n;s&&r&&i&&o?e?(a((0,l.XA)(e,{businessId:s,slug:r,sections:i,pageName:o})),t("".concat(c.fp.DASHBOARD))):(a((0,l.a3)({businessId:s,slug:r,sections:i,pageName:o})),t("".concat(c.fp.DASHBOARD))):console.log("All fields are required.")},register:o,handleSubmit:d,errors:m,reset:g,control:u}};var d=a(420),m=a(292),g=a(965),u=a(881),x=a(379),h=a(579);const b=e=>{let{register:s,label:a,name:t,placeholder:n,rules:r={},errors:l,rows:i=10,maxLength:c=2e3}=e;return(0,h.jsxs)("div",{className:"mb-3",children:[a&&(0,h.jsx)("label",{htmlFor:t,className:"form-label fw-medium",children:a}),(0,h.jsx)("textarea",(0,x.A)((0,x.A)({id:t,maxLength:c,rows:i,name:t,placeholder:n},s(t,r)),{},{className:"form-control".concat(null!==l&&void 0!==l&&l[t]?" is-invalid":""),style:{resize:"none",minHeight:"10rem",width:"100%",maxWidth:"300px"}})),(null===l||void 0===l?void 0:l[t])&&(0,h.jsx)("div",{className:"invalid-feedback d-block",children:l[t].message||"This field is required"})]})};var p=a(452);const f=function(e){let{control:s,register:a,errors:t}=e;const{fields:n,append:l,remove:i}=(0,r.jz)({control:s,name:"sections"});return(0,h.jsxs)("div",{className:"col-12",children:[(0,h.jsx)("div",{className:"d-flex align-items-center justify-content-between mb-3"}),n.map((e,n)=>(0,h.jsx)("div",{className:"mb-4",children:(0,h.jsxs)("div",{className:"card shadow-sm border-0",children:[(0,h.jsx)("div",{className:"card-header bg-primary text-white d-flex justify-content-between align-items-center",children:(0,h.jsx)("span",{children:"\u05e4\u05e1\u05e7\u05d4 ".concat(n+1)})}),(0,h.jsx)("div",{className:"card-body",children:(0,h.jsxs)("div",{className:"row g-3 d-flex justify-content-between align-items-center flex-wrap",children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-lg-4 col-12",children:(0,h.jsx)(g.A,{register:a,name:"sections.".concat(n,".title"),label:"\u05db\u05d5\u05ea\u05e8\u05ea",errors:t})}),(0,h.jsx)("div",{className:"col-lg-4 col-12",children:(0,h.jsx)(b,{register:a,name:"sections.".concat(n,".data.text"),label:"\u05d8\u05e7\u05e1\u05d8",errors:t})})]}),null!==e.data.image&&(0,h.jsx)("div",{className:"col-12 ",children:(0,h.jsx)(p.A,{name:"sections.".concat(n,".data.image"),control:s})})]})})]})},e.id))]})},j=()=>{const{id:e}=(0,i.g)(),{businessByUserId:s}=(0,n.d4)(e=>e.businessReducer),a=s._id,{onSubmit:r,register:x,handleSubmit:b,errors:p,reset:j,control:v}=o(e,a),N=(0,n.wA)(),{pageById:y}=(0,n.d4)(e=>e.pageReducer);return(0,t.useEffect)(()=>{e&&N((0,l.MD)(e))},[N,e]),(0,t.useEffect)(()=>{y&&e&&j({slug:y.slug,sections:y.sections,pageName:y.pageName})},[y,j]),(0,h.jsxs)("div",{children:[(0,h.jsx)(u.A,{text:"\u05d7\u05d6\u05e8\u05d4 \u05dc\u05d3\u05e3 \u05d4\u05d1\u05d9\u05ea",to:c.fp.DASHBOARD,className:"btn btn-primary"}),(0,h.jsx)(d.A,{subForms:[{title:"\u05e9\u05dd \u05d4\u05d3\u05e3",children:[{component:g.A,props:{register:x,name:"pageName",label:"",errors:p}}]},{title:"\u05e4\u05e1\u05e7\u05d0\u05d5\u05ea",children:[{component:f,props:{control:v,register:x,errors:p}}],gridCols:1}],renderSubForms:(e,s)=>(0,h.jsx)(m.A,{title:e.title,children:e.children,gridCols:e.gridCols},s),handleSubmit:b,onSubmit:r,buttonText:e?"\u05e2\u05e8\u05d9\u05db\u05ea \u05d3\u05e3":"\u05d4\u05d5\u05e1\u05e4\u05ea \u05d3\u05e3"})]})}},452(e,s,a){a.d(s,{A:()=>o});var t=a(43),n=a(858),r=a(819);const l={addImage:e=>r.A.post("/image/add",e)};var i=a(579);const c=function(e){let{file:s,image:a,onChange:n,uploaded:r,register:l,name:c,ImageTitle:o}=e;const[d,m]=(0,t.useState)(!1),[g,u]=(0,t.useState)(""),x=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),h=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m(!0)},[]),b=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m(!1)},[]),p=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m(!1);const s=e.dataTransfer.files;if(s&&s.length>0){const e=s[0];if(!["image/jpeg","image/png","image/gif"].includes(e.type))return void u("\u05e1\u05d5\u05d2 \u05d4\u05e7\u05d5\u05d1\u05e5 \u05d0\u05d9\u05e0\u05d5 \u05e0\u05ea\u05de\u05da. \u05d0\u05e0\u05d0 \u05d4\u05e2\u05dc\u05d4 \u05e7\u05d5\u05d1\u05e5 \u05de\u05e1\u05d5\u05d2 PNG, JPG, \u05d0\u05d5 GIF \u05d1\u05dc\u05d1\u05d3.");if(e.size>10485760)return void u("\u05d4\u05e7\u05d5\u05d1\u05e5 \u05d2\u05d3\u05d5\u05dc \u05de\u05d3\u05d9. \u05d4\u05d2\u05d5\u05d3\u05dc \u05d4\u05de\u05e7\u05e1\u05d9\u05de\u05dc\u05d9 \u05d4\u05d5\u05d0 10MB.");n({target:{files:[e]}})}},[n]);return(0,i.jsx)("div",{className:"container px-0",dir:"rtl",children:(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"form-label fw-bold",children:o}),(0,i.jsxs)("div",{className:"row g-2",children:[(0,i.jsx)("div",{className:"col-lg-4 col-md-6 col-12",children:(0,i.jsx)("div",{onDragEnter:h,onDragLeave:b,onDragOver:x,onDrop:p,className:"p-4 bg-light border rounded-3 text-center position-relative ".concat(d?"border-success border-3 bg-success bg-opacity-10":"border-secondary border-2"),style:{borderStyle:"dashed",transition:"background 0.2s, border 0.2s"},children:(0,i.jsxs)("div",{className:"mb-2 d-flex flex-column align-items-center justify-content-center",children:[(0,i.jsx)("div",{className:"mb-2",style:{width:44,height:44,background:"#e9ecef",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:28,color:"#868e96"},children:(0,i.jsx)("i",{className:"bi bi-image"})}),(0,i.jsx)("div",{className:"fw-normal text-secondary small",children:"\u05d2\u05e8\u05d5\u05e8 \u05d5\u05e9\u05d7\u05e8\u05e8 \u05d0\u05ea \u05d4\u05ea\u05de\u05d5\u05e0\u05d4 \u05db\u05d0\u05df, \u05d0\u05d5"}),(0,i.jsxs)("label",{className:"btn btn-success mt-2 mb-0",children:["\u05d1\u05d7\u05e8 \u05e7\u05d5\u05d1\u05e5",(0,i.jsx)("input",{type:"file",id:"fileInput",name:c,onChange:e=>{const s=e.target.files[0];if(console.log("file:",s),s){if(!["image/jpeg","image/png","image/gif"].includes(s.type))return void u("\u05e1\u05d5\u05d2 \u05d4\u05e7\u05d5\u05d1\u05e5 \u05d0\u05d9\u05e0\u05d5 \u05e0\u05ea\u05de\u05da. \u05d0\u05e0\u05d0 \u05d4\u05e2\u05dc\u05d4 \u05e7\u05d5\u05d1\u05e5 \u05de\u05e1\u05d5\u05d2 PNG, JPG, \u05d0\u05d5 GIF \u05d1\u05dc\u05d1\u05d3.");if(s.size>10485760)return void u("\u05d4\u05e7\u05d5\u05d1\u05e5 \u05d2\u05d3\u05d5\u05dc \u05de\u05d3\u05d9. \u05d4\u05d2\u05d5\u05d3\u05dc \u05d4\u05de\u05e7\u05e1\u05d9\u05de\u05dc\u05d9 \u05d4\u05d5\u05d0 10MB.");u(""),n(e)}},accept:"image/png,image/jpeg,image/gif",className:"d-none"})]}),(0,i.jsx)("div",{className:"form-text mt-2",children:"PNG, JPG, GIF \u05e2\u05d3 10MB"})]})})}),(0,i.jsx)("div",{className:"col-lg-4 col-md-6 col-12",children:g?(0,i.jsx)("div",{className:"h-100 d-flex align-items-center justify-content-center border border-danger rounded-3 bg-danger bg-opacity-10 p-2",children:(0,i.jsx)("p",{className:"text-danger text-center m-0 small",children:g})}):s?(0,i.jsx)("div",{className:"h-100 d-flex flex-column align-items-center justify-content-center border rounded-3 bg-white",children:r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:a,alt:"\u05ea\u05e6\u05d5\u05d2\u05d4 \u05de\u05e7\u05d3\u05d9\u05de\u05d4",style:{maxHeight:"9rem",width:"100%",objectFit:"contain",padding:6},className:"mb-2"}),(0,i.jsx)("p",{className:"small mb-0 text-secondary",children:"\u05ea\u05de\u05d5\u05e0\u05d4 \u05d7\u05d3\u05e9\u05d4"})]}):(0,i.jsx)("p",{className:"text-secondary small mb-0",children:"\u05de\u05e2\u05dc\u05d4 \u05ea\u05de\u05d5\u05e0\u05d4..."})}):a?(0,i.jsxs)("div",{className:"h-100 d-flex flex-column align-items-center justify-content-center border rounded-3 bg-white",children:[(0,i.jsx)("img",{src:a,alt:"\u05ea\u05de\u05d5\u05e0\u05d4 \u05e7\u05d9\u05d9\u05de\u05ea",style:{maxHeight:"9rem",width:"100%",objectFit:"contain",padding:6},className:"mb-2"}),(0,i.jsx)("p",{className:"small mb-0 text-secondary",children:"\u05ea\u05de\u05d5\u05e0\u05d4 \u05e7\u05d9\u05d9\u05de\u05ea"})]}):(0,i.jsx)("div",{className:"h-100 d-flex align-items-center justify-content-center border rounded-3 bg-light",children:(0,i.jsx)("p",{className:"mb-0 text-secondary ",children:"\u05d0\u05d9\u05df \u05ea\u05de\u05d5\u05e0\u05d4"})})})]})]})})},o=e=>{let{name:s,control:a,ImageTitle:r="\u05ea\u05de\u05d5\u05e0\u05d4"}=e;const[o,d]=(0,t.useState)(null),[m,g]=(0,t.useState)(!1),u=async(e,s)=>{const a=new FileReader;a.readAsDataURL(e),a.onloadend=async()=>{const e=a.result,t=await x(e);s.onChange(t)}},x=async e=>{const s=new FormData;s.append("image",e),g(!0);try{return await l.addImage(s)}finally{g(!1)}};return(0,i.jsx)(n.xI,{name:s,control:a,defaultValue:null,render:e=>{var a;let{field:t}=e;return(0,i.jsx)(c,{name:s,ImageTitle:r,file:o,image:(null===(a=t.value)||void 0===a?void 0:a.image)||null,uploaded:!m,onChange:e=>(async(e,s)=>{var a;const t=null===(a=e.target.files)||void 0===a?void 0:a[0];t&&(d(t),u(t,s))})(e,t)})}})}}}]);
//# sourceMappingURL=320.19760efb.chunk.js.map