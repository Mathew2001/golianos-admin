{"version":3,"file":"static/js/320.19760efb.chunk.js","mappings":"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","sources":["hooks/usePageSubmit.js","inputs/TextArea.js","inputs/SectionsEditor.js","components/pages/NewPage.jsx","redux/sevices/imageServices.js","inputs/SingleImageUploader.js","inputs/ImageUploader.js"],"sourcesContent":["import { useDispatch } from \"react-redux\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { createPage, updatePage } from \"../redux/actions/PageActions\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { ROUTE_PATHS } from \"../const\";\r\n\r\nconst usePageSubmit = (id, businessId) => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    reset,\r\n    control,\r\n  } = useForm();\r\n  const onSubmit = ({ slug, sections, pageName}) => {\r\n    if (businessId && slug && sections && pageName) {\r\n      if (id) {\r\n        dispatch(updatePage(id, { businessId, slug, sections, pageName }));\r\n        navigate(`${ROUTE_PATHS.DASHBOARD}`);\r\n      }\r\n      else {\r\n        dispatch(createPage({ businessId, slug, sections, pageName }));\r\n        navigate(`${ROUTE_PATHS.DASHBOARD}`);\r\n      }\r\n    }\r\n    else {\r\n      console.log(\"All fields are required.\");\r\n    }\r\n  }\r\n  return {\r\n    onSubmit,\r\n    register,\r\n    handleSubmit,\r\n    errors,\r\n    reset,\r\n    control,\r\n  }\r\n}\r\n\r\nexport default usePageSubmit;","import React from \"react\";\r\n\r\nconst TextArea = ({\r\n  register,\r\n  label,\r\n  name,\r\n  placeholder,\r\n  rules = {},\r\n  errors,\r\n  rows = 10,\r\n  maxLength = 2000,\r\n}) => {\r\n  return (\r\n    <div className=\"mb-3\">\r\n      {label && (\r\n        <label\r\n          htmlFor={name}\r\n          className=\"form-label fw-medium\"\r\n        >\r\n          {label}\r\n        </label>\r\n      )}\r\n      <textarea\r\n        id={name}\r\n        maxLength={maxLength}\r\n        rows={rows}\r\n        name={name}\r\n        placeholder={placeholder}\r\n        {...register(name, rules)}\r\n        className={`form-control${errors?.[name] ? \" is-invalid\" : \"\"}`}\r\n        style={{ resize: \"none\", minHeight: \"10rem\", width: \"100%\", maxWidth: \"300px\" }}\r\n      />\r\n      {errors?.[name] && (\r\n        <div className=\"invalid-feedback d-block\">\r\n          {errors[name].message || \"This field is required\"}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextArea;\r\n","import { useFieldArray, Controller } from \"react-hook-form\";\r\nimport InputArea from \"./InputArea\";\r\nimport TextArea from \"./TextArea\";\r\nimport ImageUploader from \"./ImageUploader\";\r\nfunction SectionsEditor({ control, register, errors }) {\r\n  const { fields, append, remove } = useFieldArray({\r\n    control,\r\n    name: \"sections\",\r\n  });\r\n  \r\n  return (\r\n    <div className=\"col-12\">\r\n      <div className=\"d-flex align-items-center justify-content-between mb-3\">\r\n        {/* <h3 className=\"h5 fw-bold mb-0\">Sections</h3> */}\r\n        {/* <button\r\n          type=\"button\"\r\n          className=\"btn btn-secondary\"\r\n          onClick={() =>\r\n            append({ title: \"\", order: fields.length + 1, data: { text: \"\" }, images: \"\" })\r\n          }\r\n        >\r\n          + Add Section\r\n        </button> */}\r\n      </div>\r\n\r\n      {fields.map((field, index) => (\r\n        <div key={field.id} className=\"mb-4\">\r\n          <div className=\"card shadow-sm border-0\">\r\n            <div className=\"card-header bg-primary text-white d-flex justify-content-between align-items-center\">\r\n              <span>{`פסקה ${index + 1}`}</span>\r\n              {/* <button className=\"btn btn-danger\" onClick={() => remove(index)}>מחק</button> */}\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div className=\"row g-3 d-flex justify-content-between align-items-center flex-wrap\">\r\n                <div className=\"row\">\r\n                <div className=\"col-lg-4 col-12\">\r\n                  <InputArea\r\n                    register={register}\r\n                    name={`sections.${index}.title`}\r\n                    label=\"כותרת\"\r\n                    errors={errors}\r\n                  />\r\n                </div>\r\n                {/* <div className=\"col-lg-4 col-12\">\r\n                  <InputArea\r\n                    register={register}\r\n                    name={`sections.${index}.order`}\r\n                    label=\"סדר\"\r\n                    errors={errors}\r\n                  />\r\n                </div> */}\r\n                <div className=\"col-lg-4 col-12\">\r\n                  <TextArea\r\n                    register={register}\r\n                    name={`sections.${index}.data.text`}\r\n                    label=\"טקסט\"\r\n                    errors={errors}\r\n                  />\r\n                </div>\r\n                </div>\r\n                {\r\n                  field.data.image !== null && (\r\n                    <div className=\"col-12 \">\r\n                      <ImageUploader name={`sections.${index}.data.image`} control={control} />\r\n                    </div>\r\n                  )\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SectionsEditor;","import { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport usePageSubmit from '../../hooks/usePageSubmit'\r\nimport { useParams, useLocation } from 'react-router-dom'\r\nimport { getPageById } from '../../redux/actions/PageActions'\r\nimport Form from '../../inputs/forms/Form'\r\nimport SubForm from '../../inputs/forms/SubForm'\r\nimport InputArea from '../../inputs/InputArea'\r\nimport LinkButton from '../buttons/LinkButton'\r\nimport SectionsEditor from '../../inputs/SectionsEditor'\r\nimport { ROUTE_PATHS } from '../../const'\r\nimport ImageUploader from '../../inputs/ImageUploader'\r\n\r\nconst NewPage = () => {\r\n  const { id } = useParams();\r\n\r\n  const {businessByUserId} = useSelector((state) => state.businessReducer);\r\n  const businessId = businessByUserId._id;\r\n  const { onSubmit, register, handleSubmit, errors, reset, control } = usePageSubmit(id, businessId);\r\n  const dispatch = useDispatch();\r\n  \r\n  const { pageById } = useSelector((state) => state.pageReducer);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      dispatch(getPageById(id));\r\n    }\r\n  }, [dispatch, id]);\r\n\r\n  useEffect(() => {\r\n    if (pageById&&id) {\r\n      reset({\r\n        slug: pageById.slug,\r\n        sections: pageById.sections,\r\n        pageName: pageById.pageName,\r\n      });\r\n    }\r\n  }, [pageById, reset]);\r\n\r\n\r\n  return (\r\n    <div>\r\n      <LinkButton text=\"חזרה לדף הבית\" to={ROUTE_PATHS.DASHBOARD} className=\"btn btn-primary\" />\r\n      <Form\r\n        subForms={[\r\n          // {\r\n          //   title: 'דף',\r\n          //   children: [\r\n          //     {\r\n          //       component: InputArea,\r\n          //       props: {\r\n          //         register,\r\n          //         name: 'slug',\r\n          //         label: 'קיצור',\r\n          //         errors,\r\n          //       },\r\n          //     }\r\n          //   ],\r\n          // },\r\n          {\r\n            title: 'שם הדף',\r\n            children: [\r\n              {\r\n                component: InputArea,\r\n                props: {\r\n                  register,\r\n                  name: 'pageName',\r\n                  label: '',\r\n                  errors,\r\n                },\r\n              },\r\n            ],\r\n          },\r\n          {\r\n            title: 'פסקאות',\r\n            children: [\r\n              {\r\n                component: SectionsEditor,\r\n                props: {\r\n                  control,\r\n                  register,\r\n                  errors,\r\n                },\r\n              },\r\n            ],\r\n            gridCols: 1,\r\n          },\r\n        ]}\r\n        renderSubForms={(subForm, index) => (\r\n          <SubForm key={index} title={subForm.title} children={subForm.children} gridCols={subForm.gridCols}  />\r\n        )}\r\n        handleSubmit={handleSubmit}\r\n        onSubmit={onSubmit}\r\n        buttonText={id ? 'עריכת דף' : 'הוספת דף'}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NewPage","import requests from \"./httpService\";\r\n\r\nconst imageServices = {\r\n  addImage(body){\r\n    return requests.post(\"/image/add\", body);\r\n  }\r\n}\r\n\r\nexport default imageServices;","import React, { useState, useCallback } from \"react\";\r\n\r\nfunction SingleImageUploader({\r\n  file,\r\n  image,\r\n  onChange,\r\n  uploaded,\r\n  register,\r\n  name,\r\n  ImageTitle,\r\n}) {\r\n\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleDrag = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  }, []);\r\n\r\n  const handleDragIn = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(true);\r\n  }, []);\r\n\r\n  const handleDragOut = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(false);\r\n  }, []);\r\n\r\n  const handleDrop = useCallback(\r\n    (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      setIsDragging(false);\r\n\r\n      const files = e.dataTransfer.files;\r\n\r\n      if (files && files.length > 0) {\r\n        const file = files[0];\r\n\r\n        const validTypes = [\"image/jpeg\", \"image/png\", \"image/gif\"];\r\n\r\n        if (!validTypes.includes(file.type)) {\r\n          setError(\r\n            \"סוג הקובץ אינו נתמך. אנא העלה קובץ מסוג PNG, JPG, או GIF בלבד.\"\r\n          );\r\n          return;\r\n        }\r\n\r\n        if (file.size > 10 * 1024 * 1024) {\r\n          setError(\"הקובץ גדול מדי. הגודל המקסימלי הוא 10MB.\");\r\n          return;\r\n        }\r\n\r\n        onChange({ target: { files: [file] } });\r\n      }\r\n    },\r\n    [onChange]\r\n  );\r\n\r\n  const handleFileSelect = (e) => {\r\n    const file = e.target.files[0];\r\n    console.log(\"file:\", file);\r\n    if (file) {\r\n      const validTypes = [\"image/jpeg\", \"image/png\", \"image/gif\"];\r\n\r\n      if (!validTypes.includes(file.type)) {\r\n        setError(\r\n          \"סוג הקובץ אינו נתמך. אנא העלה קובץ מסוג PNG, JPG, או GIF בלבד.\"\r\n        );\r\n        return;\r\n      }\r\n\r\n      if (file.size > 10 * 1024 * 1024) {\r\n        setError(\"הקובץ גדול מדי. הגודל המקסימלי הוא 10MB.\");\r\n        return;\r\n      }\r\n\r\n      setError(\"\");\r\n      onChange(e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container px-0\" dir=\"rtl\">\r\n      <div className=\"mb-3\">\r\n        <label className=\"form-label fw-bold\">{ImageTitle}</label>\r\n        <div className=\"row g-2\">\r\n          {/* Upload Area */}\r\n          <div className=\"col-lg-4 col-md-6 col-12\">\r\n            <div\r\n              onDragEnter={handleDragIn}\r\n              onDragLeave={handleDragOut}\r\n              onDragOver={handleDrag}\r\n              onDrop={handleDrop}\r\n              className={`p-4 bg-light border rounded-3 text-center position-relative ${\r\n                isDragging\r\n                  ? \"border-success border-3 bg-success bg-opacity-10\"\r\n                  : \"border-secondary border-2\"\r\n              }`}\r\n              style={{\r\n                borderStyle: \"dashed\",\r\n                transition: \"background 0.2s, border 0.2s\"\r\n              }}\r\n            >\r\n              <div className=\"mb-2 d-flex flex-column align-items-center justify-content-center\">\r\n                {/* Bootstrap does not have icons by default, so a fallback */}\r\n                <div\r\n                  className=\"mb-2\"\r\n                  style={{\r\n                    width: 44,\r\n                    height: 44,\r\n                    background: \"#e9ecef\",\r\n                    borderRadius: \"50%\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"center\",\r\n                    fontSize: 28,\r\n                    color: \"#868e96\",\r\n                  }}\r\n                >\r\n                  <i className=\"bi bi-image\"></i>\r\n                </div>\r\n                <div className=\"fw-normal text-secondary small\">\r\n                  גרור ושחרר את התמונה כאן, או\r\n                </div>\r\n                <label className=\"btn btn-success mt-2 mb-0\">\r\n                  בחר קובץ\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"fileInput\"\r\n                    name={name}\r\n                    onChange={handleFileSelect}\r\n                    accept=\"image/png,image/jpeg,image/gif\"\r\n                    className=\"d-none\"\r\n                  />\r\n                </label>\r\n                <div className=\"form-text mt-2\">\r\n                  PNG, JPG, GIF עד 10MB\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {/* Image Preview Area */}\r\n          <div className=\"col-lg-4 col-md-6 col-12\">\r\n              {error ? (\r\n                <div className=\"h-100 d-flex align-items-center justify-content-center border border-danger rounded-3 bg-danger bg-opacity-10 p-2\">\r\n                  <p className=\"text-danger text-center m-0 small\">{error}</p>\r\n                </div>\r\n              ) : file ? (\r\n                <div className=\"h-100 d-flex flex-column align-items-center justify-content-center border rounded-3 bg-white\">\r\n                  {!uploaded ? (\r\n                    <p className=\"text-secondary small mb-0\">מעלה תמונה...</p>\r\n                  ) : (\r\n                    <>\r\n                      <img\r\n                        src={image}\r\n                        alt=\"תצוגה מקדימה\"\r\n                        style={{\r\n                          maxHeight: \"9rem\",\r\n                          width: \"100%\",\r\n                          objectFit: \"contain\",\r\n                          padding: 6,\r\n                        }}\r\n                        className=\"mb-2\"\r\n                      />\r\n                      <p className=\"small mb-0 text-secondary\">תמונה חדשה</p>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              ) : image ? (\r\n                <div className=\"h-100 d-flex flex-column align-items-center justify-content-center border rounded-3 bg-white\">\r\n                  <img\r\n                    src={image}\r\n                    alt=\"תמונה קיימת\"\r\n                    style={{\r\n                      maxHeight: \"9rem\",\r\n                      width: \"100%\",\r\n                      objectFit: \"contain\",\r\n                      padding: 6,\r\n                    }}\r\n                    className=\"mb-2\"\r\n                  />\r\n                  <p className=\"small mb-0 text-secondary\">תמונה קיימת</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"h-100 d-flex align-items-center justify-content-center border rounded-3 bg-light\">\r\n                  <p className=\"mb-0 text-secondary \">אין תמונה</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SingleImageUploader;","import { useState } from \"react\";\r\nimport { Controller } from \"react-hook-form\";\r\nimport imageService from \"../redux/sevices/imageServices\";\r\nimport SingleImageUploader from \"./SingleImageUploader\";\r\n\r\nconst ImageUploader = ({ name, control, ImageTitle = \"תמונה\" }) => {\r\n  const [thisFile, setThisFile] = useState(null);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n\r\n  const handleFileChange =async (e, field) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n    setThisFile(file);\r\n    previewFiles(file, field);\r\n  }\r\n\r\n  const previewFiles = async (file, field) => {\r\n\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onloadend = async () => {\r\n      const base64Image = reader.result;\r\n      const response = await uploadImageToServer(base64Image);\r\n      field.onChange(response);\r\n    };\r\n  };\r\n\r\n  const uploadImageToServer = async (file) => {\r\n    const formData = new FormData();\r\n    formData.append(\"image\", file);\r\n    setIsUploading(true);\r\n    try {\r\n      const response = await imageService.addImage(formData);\r\n      return response; // ✅ return URL\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Controller\r\n      name={name}\r\n      control={control}\r\n      defaultValue={null}\r\n      render={({ field }) => (\r\n        <SingleImageUploader\r\n          name={name}\r\n          ImageTitle={ImageTitle}\r\n          file={thisFile}\r\n          image={field.value?.image || null}      // ✅ value stored in RHF\r\n          uploaded={!isUploading}\r\n          onChange={(e) => handleFileChange(e, field)}\r\n        />\r\n      )}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ImageUploader;\r\n"],"names":["usePageSubmit","id","businessId","dispatch","useDispatch","navigate","useNavigate","register","handleSubmit","formState","errors","reset","control","useForm","onSubmit","_ref","slug","sections","pageName","updatePage","concat","ROUTE_PATHS","DASHBOARD","createPage","console","log","label","name","placeholder","rules","rows","maxLength","_jsxs","className","children","_jsx","htmlFor","_objectSpread","style","resize","minHeight","width","maxWidth","message","fields","append","remove","useFieldArray","map","field","index","InputArea","TextArea","data","image","ImageUploader","NewPage","useParams","businessByUserId","useSelector","state","businessReducer","_id","pageById","pageReducer","useEffect","getPageById","LinkButton","text","to","Form","subForms","title","component","props","SectionsEditor","gridCols","renderSubForms","subForm","SubForm","buttonText","addImage","body","requests","post","file","onChange","uploaded","ImageTitle","isDragging","setIsDragging","useState","error","setError","handleDrag","useCallback","e","preventDefault","stopPropagation","handleDragIn","handleDragOut","handleDrop","files","dataTransfer","length","includes","type","size","target","dir","onDragEnter","onDragLeave","onDragOver","onDrop","borderStyle","transition","height","background","borderRadius","display","alignItems","justifyContent","fontSize","color","accept","_Fragment","src","alt","maxHeight","objectFit","padding","thisFile","setThisFile","isUploading","setIsUploading","previewFiles","async","reader","FileReader","readAsDataURL","onloadend","base64Image","result","response","uploadImageToServer","formData","FormData","imageService","Controller","defaultValue","render","_ref2","_field$value","SingleImageUploader","value","_e$target$files","handleFileChange"],"ignoreList":[],"sourceRoot":""}